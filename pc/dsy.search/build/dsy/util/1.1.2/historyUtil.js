define("dsy/util/1.1.2/historyUtil",function(){"use strict";var t=seajs.data.vars;if(!t.localStorage){var e=window.localStorage;try{e&&e.setItem("testPrivateModel",!1)}catch(t){console.log("not support localStorage!"),e=null}t.localStorage=e}if(!t.sessionStorage){var r=window.sessionStorage;try{r&&r.setItem("testPrivateModel",!1)}catch(t){console.log("not support sessionStorage!"),r=null}t.sessionStorage=r}var o=function(){this.HISTORY_COUNT=10,this.historyObject={key:"",hrefUrl:"",adUrl:"",type:"",tag:"",suffix:"",ext:""}};return o.prototype.stringifyJSON=function(t){return JSON.stringify(t)},o.prototype.parseJSON=function(t){return JSON.parse(t)},o.prototype.getHistory=function(e){var r=[];return t.localStorage&&(r=t.localStorage.getItem(e),r=r?this.parseJSON(r):[]),r},o.prototype.getLastHistory=function(t){var e=this.getHistory(t);return e?e[0]:""},o.prototype.getFirstHistory=function(t){var e=this.getHistory(t);return e?e[e.length-1]:""},o.prototype.queryHistory=function(t,e){for(var r=this.getHistory(t),o=r.length;o--;){var s=r[o];if(s.key===e)return s}return null},o.prototype.setHistory=function(e,r){if(t.localStorage){var o=this.formatHistoryObject(r),s=t.localStorage.getItem(e);if(s){s=this.parseJSON(s);for(var i=s.length,a=i-1;a>=0;a--)this.hasSameHistory(o,s[a])&&s.splice(a,1)}else s=[];s.unshift(o),s.length>this.HISTORY_COUNT&&s.pop(),t.localStorage.setItem(e,this.stringifyJSON(s))}},o.prototype.hasSameHistory=function(t,e){var r=this.historyObject;for(var o in r)if(r.hasOwnProperty(o)&&"hrefUrl"!==o&&t[o]!==e[o])return!1;return!0},o.prototype.formatHistoryObject=function(t){var e={};for(var r in this.historyObject)this.historyObject.hasOwnProperty(r)&&(e[r]=t[r]||"");return e.timestamp=(new Date).getTime().toString(),e},o.prototype.removeHistoryItem=function(e,r){var o=t.localStorage.getItem(e);o=this.parseJSON(o);var s=$.isArray(o)?o.length:0,i=!1;return 1===s?(i=!0,this.clearHistory(e)):(o.splice(r,1),t.localStorage.setItem(e,this.stringifyJSON(o))),i},o.prototype.clearHistory=function(e){t.localStorage&&t.localStorage.removeItem(e)},o.prototype.setSession=function(e,r){t.sessionStorage&&t.sessionStorage.setItem(e,JSON.stringify(r))},o.prototype.getSession=function(e){if(t.sessionStorage)return JSON.parse(t.sessionStorage.getItem(e))},new o});