define("dsy/search/1.2.2/esf",["dsy/search/1.2.2/interface"],function(e,t,r){"use strict";function s(){c.call(this),this.tag="esf",this.suffix="\u4e8c\u624b\u623f",this.init()}var a=seajs.data.vars,c=e("dsy/search/1.2.2/interface");s.prototype=Object.create(c.prototype),s.prototype.constructor=s,s.prototype.init=function(){this.tpl=["<tr data-key=\"{{search_key}}\" data-search='{{search_object}}'>",'<th><p>{{suggest_word}}&nbsp;<span class="gray9">{{suggest_district}}</span></p></th>',"<td><p>{{suggest_count}}</p></td>","</tr>"].join(""),this.defaultText=a.searchDefaultText.esf,this.defaultHref=a.searchDefaultHref.esf,this.historyKey=this.getHistoryKey(this.tag)},s.prototype.formatSearch=function(e){var t=this;return{key:e.key||"",hrefUrl:e.hrefUrl||"",district:e.district||"",tag:t.tag,suffix:t.suffix,category:e.category||"",id:e.id||"",comerce:e.comerce||"",purpose:e.purpose||""}},s.prototype.replaceTpl=function(e){var t=this.tpl;return t=t.replace("{{search_key}}",e.key),t=t.replace("{{search_object}}",JSON.stringify(e)),t=t.replace("{{suggest_word}}",e.key),t=t.replace("{{suggest_district}}",e.district+" "+e.comerce),t=t.replace("{{suggest_count}}",e.count?"\u7ea6"+e.count+"\u6761\u623f\u6e90":"")},s.prototype.getSuggestHtml=function(e){var t=this,r=JSON.parse(e),s=r.hit,a="";if(s.length)for(var c=0;c<s.length;c++){var o=s[c],i=o.esfcount;if("0"!==i){var n=t.formatSearch({key:o.projname,district:o.district,category:o.category,id:o.id,comerce:o.comerce,purpose:o.purpose});3!=+o.category&&(n.count=i),a+=t.replaceTpl(n)}}t.suggestHtml=a},s.prototype.searchByKey=function(e){var t=this,r=t.defaultHref,s=a.cityCode;e&&e!==t.defaultText&&(r="bt"===s||"hd"===s||"jining"===s||"lc"===s||"linyi"===s||"zb"===s||"hengyang"===s||"wuhu"===s||"ganzhou"===s||"yancheng"===s||"zhenjiang"===s||"st"===s||"leshan"===s||"lyg"===s||"xiangyang"===s||"mas"===s||"zhuzhou"===s||"bengbu"===s||"bh"===s||"sx"===s||"liuzhou"===s||"yueyang"===s||"huzhou"===s||"zhoushan"===s?r+"/esfhouse/kw"+t.encode(e)+"/":r+"/house/c61-kw"+t.encode(e)+"/"),this.openUrl(e,r);var c=t.formatSearch({key:e,hrefUrl:r});t.setHistory(e,c)},r.exports=new s});