define("dsy/search/1.2.2/esf",["dsy/search/1.2.2/interface"],function(e,t,r){"use strict";function s(){c.call(this),this.tag="esf",this.suffix="\u4e8c\u624b\u623f",this.init()}var a=seajs.data.vars,c=e("dsy/search/1.2.2/interface");s.prototype=Object.create(c.prototype),s.prototype.constructor=s,s.prototype.init=function(){this.tpl=["<tr data-key=\"{{search_key}}\" data-search='{{search_object}}'>",'<th><p>{{suggest_word}}&nbsp;<span class="gray9">{{suggest_district}}</span></p></th>',"<td><p>{{suggest_count}}</p></td>","</tr>"].join(""),this.defaultText=a.searchDefaultText.esf,this.defaultHref=a.searchDefaultHref.esf,this.historyKey=this.getHistoryKey(this.tag)},s.prototype.formatSearch=function(e){var t=this;return{key:e.key||"",hrefUrl:e.hrefUrl||"",district:e.district||"",tag:t.tag,suffix:t.suffix,category:e.category||"",id:e.id||"",comerce:e.comerce||"",purpose:e.purpose||""}},s.prototype.replaceTpl=function(e){var t=this.tpl;return t=t.replace("{{search_key}}",e.key),t=t.replace("{{search_object}}",JSON.stringify(e)),t=t.replace("{{suggest_word}}",e.key),t=t.replace("{{suggest_district}}",e.district+" "+e.comerce),t=t.replace("{{suggest_count}}",e.count?"\u7ea6"+e.count+"\u6761\u623f\u6e90":"")},s.prototype.getSuggestHtml=function(e){var t=this,r=JSON.parse(e),s=r.hit,a="";if(s.length)for(var c=0;c<s.length;c++){var o=s[c],i=o.esfcount;if("0"!==i){var h=t.formatSearch({key:o.projname,district:o.district,category:o.category,id:o.id,comerce:o.comerce,purpose:o.purpose});3!=+o.category&&(h.count=i),a+=t.replaceTpl(h)}}t.suggestHtml=a},s.prototype.searchByKey=function(e,t){var r=this,s=r.defaultHref,c=a.cityCode;if(e&&e!==r.defaultText&&(s="bt"===c||"hd"===c||"jining"===c||"lc"===c||"linyi"===c||"zb"===c||"hengyang"===c||"wuhu"===c||"ganzhou"===c||"yancheng"===c||"zhenjiang"===c||"st"===c||"leshan"===c||"lyg"===c||"xiangyang"===c||"mas"===c||"zhuzhou"===c||"bengbu"===c||"bh"===c||"sx"===c||"liuzhou"===c||"yueyang"===c||"huzhou"===c||"zhoushan"===c?s+"/esfhouse/kw"+r.encode(e)+"/":s+"/house/c61-kw"+r.encode(e)+"/"),a.aHref.href=s,a.aHref.click(),+t.store){var o=r.formatSearch({key:e,hrefUrl:s});r.setHistory(e,o)}},r.exports=new s});