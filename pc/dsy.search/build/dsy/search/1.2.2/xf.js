define("dsy/search/1.2.2/xf",["dsy/search/1.2.2/interface"],function(t,e,r){"use strict";function s(){i.call(this),this.tag="xf",this.suffix="\u65b0\u623f",this.init()}var a=seajs.data.vars,i=t("dsy/search/1.2.2/interface");s.prototype=Object.create(i.prototype),s.prototype.constructor=s,s.prototype.init=function(){this.tpl=["<tr data-key=\"{{search_key}}\" data-search='{{search_object}}'>",'<th><p>{{suggest_word}}&nbsp;<span class="gray9">{{suggest_district}}</span></p></th>',"<td>{{suggest_count}}</td>","</tr>"].join(""),this.defaultText=a.searchDefaultText.xf,this.defaultHref=a.searchDefaultHref.xf,this.historyKey=this.getHistoryKey(this.tag),this.sessionKey=this.getSessionKey(this.tag)},s.prototype.formatSearch=function(t){var e=this;return{key:t.key||"",adUrl:t.adUrl||"",hrefUrl:t.hrefUrl||"",district:t.district||"",estate:t.estate||"",hrefState:t.hrefState||"",store:t.store||"1",tag:e.tag,suffix:e.suffix}},s.prototype.getSuggestHtml=function(t){var e=this,r=t.split(","),s="",i="";if(r.length&&+r[0]>=a.getRequestNumber())for(var o=1;o<r.length;o++){var c=r[o].split("^"),f=e.tpl,h=c[0],l=c[3],p=/^http:\/\/mshow\.fang\.com.*&u=/.test(l);!p&&c[3]&&(h=h+" - "+c[3]);var n=e.formatSearch({key:h,district:c[1],estate:p?"":c[3],hrefState:p?"1":c[4],hrefUrl:p?c[3]:c[5],store:p?"0":"1",adUrl:p?c[3]:""}),u=JSON.stringify(n);n.hrefUrl&&e.urlBackup(h,u);var d="\u4e70\u65b0\u623f \u9886\u7ea2\u5305 \u4eba\u4eba\u6709\u4efd"===n.key,g=c[2],y=n.key,k=n.district;d&&(y='<font color="red">'+y+"</font>"),g=+g?d?"<p>\u652f\u6301"+g+"\u4e2a\u697c\u76d8</p>":"<p>\u7ea6"+g+"\u6761</p>":"",n.adUrl&&(g=e.advertImage),k&&(k="["+k+"]"),f=f.replace("{{search_key}}",n.key),f=f.replace("{{search_object}}",u),f=f.replace("{{suggest_word}}",y),f=f.replace("{{suggest_district}}",k),f=f.replace("{{suggest_count}}",g),n.adUrl?i+=f:s+=f}i&&(e.advertHtml=i),e.suggestHtml=s},s.prototype.searchByKey=function(t,e,r){var s=this,a=t,i=s.backup[a],o=null;i?o=JSON.parse(i):e&&(o=e);var c=o?o.hrefUrl:"";c=c?"button"===r?"1"===o.hrefState?c.replace(/\&amp;/g,"&"):s.defaultHref+"/a9"+s.encode(a.split(" - ")[0])+"/":c.replace(/\&amp;/g,"&"):a&&a!==s.defaultText?s.defaultHref+"/a9"+s.encode(a)+"/":s.defaultHref+"/",this.openUrl(a,c),o||(o=s.formatSearch({key:a,hrefUrl:c})),+o.store&&s.setHistory(a,o)},r.exports=new s});