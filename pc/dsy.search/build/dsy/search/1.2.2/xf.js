define("dsy/search/1.2.2/xf",["dsy/search/1.2.2/interface"],function(t,e,r){"use strict";function s(){i.call(this),this.tag="xf",this.suffix="\u65b0\u623f",this.init()}var a=seajs.data.vars,i=t("dsy/search/1.2.2/interface");s.prototype=Object.create(i.prototype),s.prototype.constructor=s,s.prototype.init=function(){this.tpl=["<tr data-key=\"{{search_key}}\" data-search='{{search_object}}'>",'<th><p>{{suggest_word}}&nbsp;<span class="gray9">{{suggest_district}}</span></p></th>',"<td>{{suggest_count}}</td>","</tr>"].join(""),this.defaultText=a.searchDefaultText.xf,this.defaultHref=a.searchDefaultHref.xf,this.historyKey=this.getHistoryKey(this.tag),this.sessionKey=this.getSessionKey(this.tag)},s.prototype.formatSearch=function(t){var e=this;return{key:t.key||"",adUrl:t.adUrl||"",hrefUrl:t.hrefUrl||"",district:t.district||"",estate:t.estate||"",hrefState:t.hrefState||"",store:t.store||"1",tag:e.tag,suffix:e.suffix}},s.prototype.getSuggestHtml=function(t){var e=this,r=t.split(","),s="",i="";if(r.length&&+r[0]>=a.getRequestNumber())for(var c=1;c<r.length;c++){var f=r[c].split("^"),o=e.tpl,h=f[0],l=f[3],p=/^http:\/\/mshow\.fang\.com.*&u=/.test(l);!p&&f[3]&&(h=h+" - "+f[3]);var n=e.formatSearch({key:h,district:f[1],estate:p?"":f[3],hrefState:p?"1":f[4],hrefUrl:p?f[3]:f[5],store:p?"0":"1",adUrl:p?f[3]:""}),u=JSON.stringify(n);n.hrefUrl&&e.urlBackup(h,u);var d="\u4e70\u65b0\u623f \u9886\u7ea2\u5305 \u4eba\u4eba\u6709\u4efd"===n.key,g=f[2],y=n.key,k=n.district;d&&(y='<font color="red">'+y+"</font>"),g=+g?d?"<p>\u652f\u6301"+g+"\u4e2a\u697c\u76d8</p>":"<p>\u7ea6"+g+"\u6761</p>":"",n.adUrl&&(g=e.advertImage),k&&(k="["+k+"]"),o=o.replace("{{search_key}}",n.key),o=o.replace("{{search_object}}",u),o=o.replace("{{suggest_word}}",y),o=o.replace("{{suggest_district}}",k),o=o.replace("{{suggest_count}}",g),n.adUrl?i+=o:s+=o}i&&(e.advertHtml=i),e.suggestHtml=s},s.prototype.searchByKey=function(t,e,r){var s=this,i=t,c=s.backup[i],f=null;c?f=JSON.parse(c):e&&(f=e);var o=f?f.hrefUrl:"";o=o?"button"===r?"1"===f.hrefState?o.replace(/\&amp;/g,"&"):s.defaultHref+"/a9"+s.encode(i.split(" - ")[0])+"/":o.replace(/\&amp;/g,"&"):i&&i!==s.defaultText?s.defaultHref+"/a9"+s.encode(i)+"/":s.defaultHref+"/",a.aHref.href=o,a.aHref.click(),f||(f=s.formatSearch({key:i,hrefUrl:o})),+f.store&&s.setHistory(i,f)},r.exports=new s});