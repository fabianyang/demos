define("dsy/search/1.2.2/jiaju",["dsy/search/1.2.2/interface"],function(t,e,r){"use strict";function a(){o.call(this),this.tag="jiaju",this.suffix="\u5bb6\u5c45",this.init()}var s=seajs.data.vars,o=t("dsy/search/1.2.2/interface");a.prototype=Object.create(o.prototype),a.prototype.constructor=a,a.prototype.init=function(){this.tpl=["<tr data-key=\"{{search_key}}\" data-search='{{search_object}}'>","<th><p>{{suggest_word}}</p></th>","<td>{{adImg}}</td>","</tr>"].join(""),this.defaultText=s.searchDefaultText.jiaju,this.historyKey=this.getHistoryKey(this.tag)},a.prototype.formatSearch=function(t){var e=this;return{key:t.key||"",adUrl:t.adUrl||"",hrefUrl:t.hrefUrl||"",district:t.district||"",store:t.store||"1",tag:e.tag,suffix:e.suffix}},a.prototype.getSuggestHtml=function(t){var e=this,r=t.split(","),a="",s="";if(r.length)for(var o=0;o<r.length;o++){var i=r[o].split("^"),c=e.tpl,h=i[0],p=i[1],f=/^http:\/\/mshow\.fang\.com.*&u=/.test(p)?e.replaceUrlArg(p):"",l=e.formatSearch({key:h,hrefUrl:p,adUrl:f,store:f?"0":"1"}),n=JSON.stringify(l);p&&e.urlBackup(h,n),c=c.replace("{{search_key}}",l.key),c=c.replace("{{search_object}}",n),c=c.replace("{{suggest_word}}",l.key),c=c.replace("{{adImg}}",f?e.advertImage:""),f?s+=c:a+=c}s&&(e.advertHtml=s),e.suggestHtml=a},a.prototype.searchByKey=function(t,e){var r=this,a=t,o=r.backup[a],i=null;o?i=JSON.parse(o):e&&(i=e);var c=i?i.hrefUrl:"";c=c?c.replace(/\&amp;/g,"&"):a&&a!==r.defaultText?"http://home.fang.com/album/search/?page=1&sortid=11&keyword="+r.encode(a):"http://home.fang.com/album/search/?page=1&sortid=11",s.aHref.href=c,s.aHref.click(),i||(i=r.formatSearch({key:a,hrefUrl:c})),+i.store&&r.setHistory(a,i)},r.exports=new a});